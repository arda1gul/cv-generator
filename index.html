<!DOCTYPE html>
<html lang="nl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professionele CV Generator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="cv-generator.css">
</head>

<body>
    <div class="container my-5">
        <h1 class="text-center mb-4">Professionele CV Generator</h1>

        <form id="cv-form">
            <div class="row g-2">
                <div class="col-md-6"><label class="form-label">Naam</label><input type="text" class="form-control"
                        id="fullName"></div>
                <div class="col-md-6"><label class="form-label">Email</label><input type="email" class="form-control"
                        id="email"></div>
                <div class="col-md-6"><label class="form-label">Telefoon</label><input type="text" class="form-control"
                        id="phone"></div>
                <div class="col-md-6"><label class="form-label">Adres</label><input type="text" class="form-control"
                        id="address"></div>
            </div>

            <div class="mb-2"><label class="form-label">Profielfoto URL (optioneel)</label><input type="text"
                    class="form-control" id="photo"></div>
            <div class="mb-2"><label class="form-label">LinkedIn URL (optioneel)</label><input type="text"
                    class="form-control" id="linkedin"></div>
            <div class="mb-2"><label class="form-label">Persoonlijke Samenvatting</label><textarea class="form-control"
                    id="summary" rows="2"></textarea></div>
            <div class="mb-2"><label class="form-label">Opleiding (gebruik ; , met datums)</label><textarea
                    class="form-control" id="education" rows="2"></textarea></div>
            <div class="mb-2"><label class="form-label">Werkervaring (gebruik ; , met datums)</label><textarea
                    class="form-control" id="experience" rows="2"></textarea></div>
            <div class="mb-2"><label class="form-label">Stage ervaring (optioneel)</label><textarea class="form-control"
                    id="internship" rows="2"></textarea></div>
            <div class="mb-2"><label class="form-label">Certificaten (optioneel, scheid met ;)</label><textarea
                    class="form-control" id="certificates" rows="2"></textarea></div>
            <div class="mb-2"><label class="form-label">Talen (scheid met ;)</label><textarea class="form-control"
                    id="languages" rows="2"></textarea></div>
            <div class="mb-2"><label class="form-label">Vaardigheden (scheid met ;)</label><textarea
                    class="form-control" id="skills" rows="2"></textarea></div>

            <label class="form-label">Kies een thema</label>
            <div class="mb-3">
                <div class="theme-preview theme-modern" onclick="selectTheme('theme-modern', this)">Modern</div>
                <div class="theme-preview theme-elegant" onclick="selectTheme('theme-elegant', this)">Elegant</div>
                <div class="theme-preview theme-classic" onclick="selectTheme('theme-classic', this)">Classic</div>
                <div class="theme-preview theme-split" onclick="selectTheme('theme-split', this)">Split</div>
                <div class="theme-preview theme-minimal" onclick="selectTheme('theme-minimal', this)">Minimal</div>
                <input type="hidden" id="theme" value="theme-modern">
            </div>

            <button type="button" class="btn btn-primary" onclick="generateCV()">Genereer CV</button>
        </form>

        <div id="cv-output" class="mt-4"></div>
        <button id="downloadBtn" class="btn btn-success">Download CV</button>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script>
        // Dummy data voor preview
        const dummyData = {
            fullName: "Jan Jansen",
            email: "jan.jansen@example.com",
            phone: "+31 6 12345678",
            address: "Amsterdam, Nederland",
            photo: "https://i.pravatar.cc/150",
            linkedin: "https://linkedin.com/in/janjansen",
            summary: "Enthousiaste softwareontwikkelaar met ervaring in data science en machine learning.",
            education: ["Universiteit van Amsterdam - Informatica - 2014-2018", "TU Delft - Data Science - 2018-2020"],
            experience: ["Bedrijf X - Software Developer - 2018-2020", "Bedrijf Y - Data Scientist - 2020-heden"],
            internship: ["Bedrijf Z - Junior Developer - 2017"],
            certificates: ["Python Developer Certificate - 2019", "AWS Certified Solutions Architect - 2021"],
            languages: ["Nederlands (moedertaal)", "Engels (vloeiend)"],
            skills: ["JavaScript", "Python", "SQL", "Machine Learning"]
        };

        function selectTheme(theme, element) {
            document.getElementById('theme').value = theme;
            document.querySelectorAll('.theme-preview').forEach(el => el.classList.remove('theme-selected'));
            element.classList.add('theme-selected');
            generateCV(true);
        }

        function generateCV(isPreview = false) {
            const d = dummyData;
            const fullName = isPreview ? d.fullName : document.getElementById('fullName').value || d.fullName;
            const email = isPreview ? d.email : document.getElementById('email').value || d.email;
            const phone = isPreview ? d.phone : document.getElementById('phone').value || d.phone;
            const address = isPreview ? d.address : document.getElementById('address').value || d.address;
            const photo = isPreview ? d.photo : document.getElementById('photo').value || d.photo;
            const linkedin = isPreview ? d.linkedin : document.getElementById('linkedin').value || d.linkedin;
            const summary = isPreview ? d.summary : document.getElementById('summary').value || d.summary;
            const education = isPreview ? d.education : (document.getElementById('education').value.split(';').filter(e => e.trim() !== '')) || d.education;
            const experience = isPreview ? d.experience : (document.getElementById('experience').value.split(';').filter(e => e.trim() !== '')) || d.experience;
            const internship = isPreview ? d.internship : (document.getElementById('internship').value.split(';').filter(e => e.trim() !== '')) || d.internship;
            const certificates = isPreview ? d.certificates : (document.getElementById('certificates').value.split(';').filter(e => e.trim() !== '')) || d.certificates;
            const languages = isPreview ? d.languages : (document.getElementById('languages').value.split(';').filter(e => e.trim() !== '')) || d.languages;
            const skills = isPreview ? d.skills : (document.getElementById('skills').value.split(';').filter(e => e.trim() !== '')) || d.skills;
            const theme = document.getElementById('theme').value;

            const contactHTML = `<p class="contact"><i class="fas fa-envelope"></i> ${email} | <i class="fas fa-phone"></i> ${phone} | <i class="fas fa-map-marker-alt"></i> ${address} ${linkedin ? `| <i class="fab fa-linkedin"></i> <a href="${linkedin}">${linkedin}</a>` : ''}</p>`;

            let cvHTML = `<div class="header"><img src="${photo}" alt="Profielfoto"><div><h2>${fullName}</h2>${contactHTML}</div></div><div class="cv-content">`;
            cvHTML += `<div class="section-title">Persoonlijk Profiel</div><p>${summary}</p>`;
            cvHTML += `<div class="section-title">Opleiding</div><ul>${education.map(e => `<li>${e}</li>`).join('')}</ul>`;
            cvHTML += `<div class="section-title">Werkervaring</div><ul>${experience.map(e => `<li>${e}</li>`).join('')}</ul>`;
            if (internship.length > 0) cvHTML += `<div class="section-title">Stage</div><ul>${internship.map(e => `<li>${e}</li>`).join('')}</ul>`;
            if (certificates.length > 0) cvHTML += `<div class="section-title">Certificaten</div><ul>${certificates.map(e => `<li>${e}</li>`).join('')}</ul>`;
            if (languages.length > 0) cvHTML += `<div class="section-title">Talen</div><ul>${languages.map(e => `<li>${e}</li>`).join('')}</ul>`;
            cvHTML += `<div class="section-title">Vaardigheden</div><ul>${skills.map(e => `<li>${e}</li>`).join('')}</ul></div>`;

            if (theme === 'theme-split') {
                cvHTML = `<div class="header"><img src="${photo}" alt="Profielfoto"><div><h2>${fullName}</h2>${contactHTML}</div></div>`;
                cvHTML += `<div class="cv-content"><div class="left">`;
                cvHTML += `<div class="section-title">Werkervaring</div><ul>${experience.map(e => `<li>${e}</li>`).join('')}</ul>`;
                cvHTML += `<div class="section-title">Vaardigheden</div><ul>${skills.map(e => `<li>${e}</li>`).join('')}</ul>`;
                cvHTML += `</div><div class="right">`;
                cvHTML += `<div class="section-title">Opleiding</div><ul>${education.map(e => `<li>${e}</li>`).join('')}</ul>`;
                if (internship.length > 0) cvHTML += `<div class="section-title">Stage</div><ul>${internship.map(e => `<li>${e}</li>`).join('')}</ul>`;
                if (certificates.length > 0) cvHTML += `<div class="section-title">Certificaten</div><ul>${certificates.map(e => `<li>${e}</li>`).join('')}</ul>`;
                if (languages.length > 0) cvHTML += `<div class="section-title">Talen</div><ul>${languages.map(e => `<li>${e}</li>`).join('')}</ul>`;
                cvHTML += `</div></div>`; // sluit cv-content
            }


            const cvOutput = document.getElementById('cv-output');
            cvOutput.className = ''; cvOutput.classList.add(theme);
            cvOutput.innerHTML = cvHTML;
            document.getElementById('downloadBtn').style.display = 'inline-block';
        }

        document.getElementById('downloadBtn').addEventListener('click', () => {
            const { jsPDF } = window.jspdf;
            html2canvas(document.getElementById('cv-output'), { scale: 2 }).then(canvas => {
                const imgData = canvas.toDataURL('image/png');
                const pdf = new jsPDF('p', 'mm', 'a4');
                const pdfWidth = 210;
                const pdfHeight = (canvas.height * pdfWidth) / canvas.width;
                pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);
                pdf.save('CV.pdf');
            });
        });

        // Init preview
        selectTheme('theme-modern', document.querySelector('.theme-modern'));
    </script>
</body>

</html>